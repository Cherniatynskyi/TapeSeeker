"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[642],{8642:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(2791),o=a(1207);const c="SearchBar_form__gW7Gj",i="SearchBar_formButton__C-ydM",r="SearchBar_input__bIy50";var n=a(1686),l=a.n(n),m=a(184);const u=e=>{let{onSubmit:t}=e;const[a,o]=(0,s.useState)("");return(0,m.jsx)("header",{children:(0,m.jsxs)("form",{className:c,onSubmit:e=>{e.preventDefault(),a?t({query:a}):l().Notify.failure("Enter your search term")},children:[(0,m.jsx)("button",{className:i,type:"submit",children:(0,m.jsx)("span",{children:"Search"})}),(0,m.jsx)("input",{className:r,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:e=>{o(e.target.value)},value:a})]})})};var _=a(7689),h=a(1087);const d="MoviesList_moviesList__P6SP5",v="MoviesList_title__PB2c8",p="MoviesList_moviesListItem__OFqms",x="MoviesList_img__v4jFC",f="MoviesList_movieTitle__CxO8p",j="MoviesList_thumbsContainer__8kNDv",y="MoviesList_thumb__xQkCm";var g=a(4869),b=a(1909);const N=e=>{let{movies:t,location:a}=e;return(0,m.jsx)("ul",{className:d,children:t?t.map((e=>{if(e.release_date)var t=e.release_date.split("-");return(0,m.jsx)(h.rU,{className:p,to:"/"===a.pathname?"movies/".concat(e.id):"".concat(e.id),state:{from:a},children:(0,m.jsxs)("li",{children:[(0,m.jsx)("img",{className:x,src:e.poster_path?"https://image.tmdb.org/t/p/w500".concat(e.poster_path):"https://eticketsolutions.com/demo/themes/e-ticket/img/movie.jpg",alt:e.title}),(0,m.jsx)("p",{className:f,children:e.title?e.title:e.name}),(0,m.jsxs)("div",{className:j,children:[(0,m.jsxs)("span",{className:y,children:[" ",(0,m.jsx)(g.cZx,{size:"1.2em"})," ",t?t[0]:"2023"]}),(0,m.jsxs)("span",{className:y,children:[" ",(0,m.jsx)(b.MVI,{size:"1.2em"}),e.vote_average.toFixed(1)]}),(0,m.jsxs)("span",{className:y,children:[" ",(0,m.jsx)(b.$lZ,{size:"1.2em"}),e.original_language]})]})]})},e.id)})):(0,m.jsx)("h1",{className:v,children:"Search for Movies"})})},k="Movies_loadButton__M-KkQ",w="Movies_backToTopButton__7yEpE";var M=a(2202);const S=()=>{const[e,t]=(0,s.useState)(null),[a,c]=(0,s.useState)(1),i=(0,_.TH)(),[r,n]=(0,h.lr)();(0,s.useEffect)((()=>{const e=r.get("q");if(!e)return(async()=>{try{const e=await o.aV("/movie/popular",a);t((t=>t?[...t,...e]:e))}catch(e){l().Notify.failure("Error")}})(),void console.log(e);(async e=>{try{const s=await o.z1(e,a);t((e=>e?[...e,...s]:s)),console.log("Fetched")}catch(s){l().Notify.failure("Error")}})(e)}),[r,a]);return(0,m.jsxs)("div",{children:[(0,m.jsx)(u,{onSubmit:e=>{let{query:a}=e;c(1),n({q:a}),t(null)}}),(0,m.jsx)(N,{movies:e,location:i}),(0,m.jsx)("button",{className:k,onClick:()=>{c((e=>e+1))},children:"load more"}),(0,m.jsx)("button",{onClick:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},className:w,children:(0,m.jsx)(M.ZTc,{size:"2em"})})]})}},1207:(e,t,a)=>{a.d(t,{TP:()=>n,XT:()=>i,aV:()=>r,z1:()=>l});var s=a(5294);const o="https://api.themoviedb.org/3",c="f331f91cb9692f1df13f3cba648b2743",i=async e=>(await(0,s.Z)({url:"".concat(o).concat(e,"?api_key=").concat(c),method:"GET"})).data.results,r=async(e,t)=>(await(0,s.Z)({url:"".concat(o).concat(e,"?api_key=").concat(c,"&page=").concat(t),method:"GET"})).data.results,n=async(e,t)=>(await(0,s.Z)({url:"".concat(o,"/movie/").concat(e).concat(t,"?api_key=").concat(c),method:"GET"})).data,l=async(e,t)=>(await(0,s.Z)({url:"".concat(o,"/search/movie?api_key=").concat(c,"&query=").concat(e,"&page=").concat(t),method:"GET"})).data.results}}]);
//# sourceMappingURL=642.5c3660c5.chunk.js.map