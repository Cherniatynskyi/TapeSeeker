"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[576],{8576:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(2791),i=a(1207);const o="SearchBar_form__gW7Gj",c="SearchBar_formButton__C-ydM",r="SearchBar_input__bIy50";var n=a(1686),l=a.n(n),m=a(184);const u=e=>{let{onSubmit:t}=e;const[a,i]=(0,s.useState)("");return(0,m.jsx)("header",{children:(0,m.jsxs)("form",{className:o,onSubmit:e=>{e.preventDefault(),a?t({query:a}):l().Notify.failure("Enter your search term")},children:[(0,m.jsx)("button",{className:c,type:"submit",children:(0,m.jsx)("span",{children:"Search"})}),(0,m.jsx)("input",{className:r,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:e=>{i(e.target.value)},value:a})]})})};var h=a(7689),d=a(1087);const v={moviesList:"MoviesList_moviesList__P6SP5",title:"MoviesList_title__PB2c8",moviesListItem:"MoviesList_moviesListItem__OFqms",img:"MoviesList_img__v4jFC",movieTitle:"MoviesList_movieTitle__CxO8p"};var _=a(4869),p=a(1909);const f=e=>{let{movies:t,location:a}=e;return(0,m.jsx)("ul",{className:v.moviesList,children:t?t.map((e=>{if(e.release_date)var t=e.release_date.split("-");return(0,m.jsx)(d.rU,{className:v.moviesListItem,to:"/"===a.pathname?"movies/".concat(e.id):"".concat(e.id),state:{from:a},children:(0,m.jsxs)("li",{children:[(0,m.jsx)("img",{className:v.img,src:e.poster_path?"https://image.tmdb.org/t/p/w300".concat(e.poster_path):"https://eticketsolutions.com/demo/themes/e-ticket/img/movie.jpg",alt:e.title}),(0,m.jsx)("p",{className:v.movieTitle,children:e.title?e.title:e.name}),(0,m.jsxs)("div",{className:v.thumbsContainer,children:[(0,m.jsxs)("span",{children:[" ",(0,m.jsx)(_.cZx,{size:"1.2em"})," ",t?t[0]:"2023"]}),(0,m.jsxs)("span",{children:[" ",(0,m.jsx)(p.MVI,{size:"1.2em"}),e.vote_average.toFixed(1)]}),(0,m.jsxs)("span",{children:[" ",(0,m.jsx)(p.$lZ,{size:"1.2em"}),e.original_language]})]})]})},e.id)})):(0,m.jsx)("h1",{className:v.title,children:"Search for Movies"})})},x=()=>{const[e,t]=(0,s.useState)(null),[a,o]=(0,s.useState)(1),c=(0,h.TH)(),[r,n]=(0,d.lr)();(0,s.useEffect)((()=>{const e=r.get("q");if(!e)return(async()=>{try{const e=await i.aV("/movie/popular",a);t((t=>t?[...t,...e]:e)),console.log("movies")}catch(e){l().Notify.failure("Error")}})(),void console.log(e);(async e=>{try{const s=await i.z1(e,a);t((e=>e?[...e,...s]:s)),console.log("Fetched")}catch(s){l().Notify.failure("Error")}})(e)}),[r,a]);return(0,m.jsxs)("div",{children:[(0,m.jsx)(u,{onSubmit:e=>{let{query:a}=e;o(1),n({q:a}),t(null)}}),(0,m.jsx)(f,{movies:e,location:c}),(0,m.jsx)("button",{onClick:()=>{o((e=>e+1))},children:"load more"})]})}},1207:(e,t,a)=>{a.d(t,{TP:()=>n,XT:()=>c,aV:()=>r,z1:()=>l});var s=a(5294);const i="https://api.themoviedb.org/3",o="f331f91cb9692f1df13f3cba648b2743",c=async e=>(await(0,s.Z)({url:"".concat(i).concat(e,"?api_key=").concat(o),method:"GET"})).data.results,r=async(e,t)=>(await(0,s.Z)({url:"".concat(i).concat(e,"?api_key=").concat(o,"&page=").concat(t),method:"GET"})).data.results,n=async(e,t)=>(await(0,s.Z)({url:"".concat(i,"/movie/").concat(e).concat(t,"?api_key=").concat(o),method:"GET"})).data,l=async(e,t)=>(await(0,s.Z)({url:"".concat(i,"/search/movie?api_key=").concat(o,"&query=").concat(e,"&page=").concat(t),method:"GET"})).data.results}}]);
//# sourceMappingURL=576.b8f792b3.chunk.js.map