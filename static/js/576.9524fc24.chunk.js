"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[576],{8576:(t,e,a)=>{a.r(e),a.d(e,{default:()=>g});var c=a(2791),o=a(1207);const s="SearchBar_form__gW7Gj",r="SearchBar_formButton__C-ydM",i="SearchBar_input__bIy50";var n=a(1686),l=a.n(n),u=a(184);const m=t=>{let{onSubmit:e}=t;const[a,o]=(0,c.useState)("");return(0,u.jsx)("header",{children:(0,u.jsxs)("form",{className:s,onSubmit:t=>{t.preventDefault(),a?e({query:a}):l().Notify.failure("Enter your search term")},children:[(0,u.jsx)("button",{className:r,type:"submit",children:(0,u.jsx)("span",{children:"Search"})}),(0,u.jsx)("input",{className:i,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:t=>{o(t.target.value)},value:a})]})})};var h=a(7689),d=a(1087);const _="MoviesList_moviesList__P6SP5",p="MoviesList_title__PB2c8",v="MoviesList_moviesListItem__OFqms",f="MoviesList_img__v4jFC",y=t=>{let{movies:e,location:a}=t;return(0,u.jsx)("ul",{className:_,children:e?e.map((t=>(0,u.jsx)(d.rU,{to:"/"===a.pathname?"movies/".concat(t.id):"".concat(t.id),state:{from:a},children:(0,u.jsx)("li",{className:v,children:(0,u.jsx)("img",{className:f,src:t.poster_path?"https://image.tmdb.org/t/p/w300".concat(t.poster_path):"https://eticketsolutions.com/demo/themes/e-ticket/img/movie.jpg",alt:t.title})})},t.id))):(0,u.jsx)("h1",{className:p,children:"Search for Movies"})})},g=()=>{const[t,e]=(0,c.useState)(null),[a,s]=(0,c.useState)(1),r=(0,h.TH)(),[i,n]=(0,d.lr)(),_=(0,c.useRef)(!1);(0,c.useEffect)((()=>{const t=i.get("q");if(t)return(async t=>{try{const c=await o.z1(t,a);e((t=>t?[...t,...c]:c)),console.log("Fetched")}catch(c){l().Notify.failure("Error")}})(t),()=>{_.current=!0};(async()=>{try{if(!0===_.current){const t=await o.aV("/movie/popular",a);e((e=>e?[...e,...t]:t)),console.log("movies")}return void(_.current=!0)}catch(t){l().Notify.failure("Error")}})()}),[i,a]);return(0,u.jsxs)("div",{children:[(0,u.jsx)(m,{onSubmit:t=>{let{query:a}=t;s(1),n({q:a}),e(null)}}),(0,u.jsx)(y,{movies:t,location:r}),(0,u.jsx)("button",{onClick:()=>{s((t=>t+1))},children:"load more"})]})}},1207:(t,e,a)=>{a.d(e,{TP:()=>n,XT:()=>r,aV:()=>i,z1:()=>l});var c=a(5294);const o="https://api.themoviedb.org/3",s="f331f91cb9692f1df13f3cba648b2743",r=async t=>(await(0,c.Z)({url:"".concat(o).concat(t,"?api_key=").concat(s),method:"GET"})).data.results,i=async(t,e)=>(await(0,c.Z)({url:"".concat(o).concat(t,"?api_key=").concat(s,"&page=").concat(e),method:"GET"})).data.results,n=async(t,e)=>(await(0,c.Z)({url:"".concat(o,"/movie/").concat(t).concat(e,"?api_key=").concat(s),method:"GET"})).data,l=async(t,e)=>(await(0,c.Z)({url:"".concat(o,"/search/movie?api_key=").concat(s,"&query=").concat(t,"&page=").concat(e),method:"GET"})).data.results}}]);
//# sourceMappingURL=576.9524fc24.chunk.js.map