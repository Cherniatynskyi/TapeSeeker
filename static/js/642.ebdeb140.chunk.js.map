{"version":3,"file":"static/js/642.ebdeb140.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/SearchBar/SearchBar.module.css?35a0","components/SearchBar/SearchBar.jsx","webpack://goit-react-hw-05-movies/./src/components/MoviesList/MoviesList.module.css?de3d","components/MoviesList/MoviesList.jsx","webpack://goit-react-hw-05-movies/./src/pages/Movies/Movies.module.css?82ee","pages/Movies/Movies.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"form\":\"SearchBar_form__gW7Gj\",\"formButton\":\"SearchBar_formButton__C-ydM\",\"input\":\"SearchBar_input__bIy50\"};","import { useState } from \"react\";\nimport css from './SearchBar.module.css'\nimport Notiflix from 'notiflix';\n\nexport const SearchBar = ({onSubmit}) => {\n    const [query, setQuery] = useState('')\n\n    const handleChange = (e) => {\n        setQuery(e.target.value)\n    }\n\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        if (!query) {\n        Notiflix.Notify.failure('Enter your search term')\n        return\n    }\n        onSubmit({query})\n    }\n\n  \n        return (\n            <header >\n                <form className={css.form} onSubmit={handleSubmit}>\n                    <button className={css.formButton} type=\"submit\">\n                    <span>Search</span>\n                    </button>\n                    <input\n                        className={css.input}\n                        type=\"text\"\n                        autoComplete=\"off\"\n                        autoFocus\n                        placeholder=\"Search movies\"\n                        onChange={handleChange}\n                        value={query}\n                    />\n                </form>\n            </header>\n        )\n}","// extracted by mini-css-extract-plugin\nexport default {\"moviesList\":\"MoviesList_moviesList__P6SP5\",\"title\":\"MoviesList_title__PB2c8\",\"moviesListItem\":\"MoviesList_moviesListItem__OFqms\",\"img\":\"MoviesList_img__v4jFC\",\"movieTitle\":\"MoviesList_movieTitle__CxO8p\",\"thumbsContainer\":\"MoviesList_thumbsContainer__8kNDv\",\"thumb\":\"MoviesList_thumb__xQkCm\"};","import css from './MoviesList.module.css'\nimport {Link} from 'react-router-dom'\nimport { CiCalendarDate } from \"react-icons/ci\";\nimport { MdStar } from \"react-icons/md\";\nimport { MdLanguage } from \"react-icons/md\";\n\nexport const MoviesList = ({movies, location}) =>{\n\n    return (<ul className={css.moviesList}>\n        {movies ? movies.map(movie => {\n            if(movie.release_date){\n                var splitted = movie.release_date.split(\"-\")   \n            }\n            return(\n             <Link className={css.moviesListItem} key={movie.id} to={location.pathname === '/' ? `movies/${movie.id}`: `${movie.id}`} state={{from: location}}>\n                <li>\n                    <img className={css.img} src={movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`: 'https://eticketsolutions.com/demo/themes/e-ticket/img/movie.jpg'} alt={movie.title}/>\n                    <p className={css.movieTitle} >{movie.title ? movie.title : movie.name}</p>\n                        <div className={css.thumbsContainer}>\n                            <span className={css.thumb}> <CiCalendarDate size=\"1.2em\" /> {splitted ? splitted[0] : '2023'}</span>\n                            <span className={css.thumb}> <MdStar size=\"1.2em\" />{movie.vote_average.toFixed(1)}</span>\n                            <span className={css.thumb}> <MdLanguage size=\"1.2em\" />{movie.original_language}</span>\n                        </div>\n                </li>\n            </Link>)\n        }): <h1 className={css.title}>Search for Movies</h1>}\n    </ul>  )\n}\n\n\n","// extracted by mini-css-extract-plugin\nexport default {\"loadButton\":\"Movies_loadButton__M-KkQ\",\"backToTopButton\":\"Movies_backToTopButton__7yEpE\"};","import { useState, useEffect} from \"react\"\nimport * as API from '../../services/movies-api'\nimport { SearchBar } from \"../../components/SearchBar/SearchBar\"\nimport {useSearchParams, useLocation } from 'react-router-dom'\nimport { MoviesList } from \"components/MoviesList/MoviesList\"\nimport css from './Movies.module.css'\nimport Notiflix from 'notiflix';\nimport { FaArrowUp } from \"react-icons/fa\";\n\nconst Movies = () =>{\n    const [searchResult, setSearchResult] = useState(null)\n    const [page, setPage] = useState(1)\n    const location = useLocation()\n    const [searchParams, setSearchParams] = useSearchParams();\n    const type = location.pathname === \"/movies\" ? \"movie\" : \"tv\"\n    const [typeParam, setTypeParam] = useState(type)\n\n    \n    useEffect(() => {\n        setTypeParam(prev =>{\n            if(prev !== type){\n                console.log(\"change\")\n                setPage(1)\n                setSearchResult(null)\n            }\n            return type\n        })\n        const q = searchParams.get('q')    \n                const getMoviesList = async()=>{\n                    try{ \n                        const fetchedMovie = await API.getMoviesList(typeParam === \"movie\" ? `/trending/movie/day` : `/trending/tv/day`, page)  \n                             \n                        setSearchResult(prevState => {\n                            const prevVal = prevState?.map(value => value.id)\n                            const currVal = fetchedMovie?.map(value => value.id)\n                            const isExist = prevVal?.find(el => currVal.includes(el))\n                    \n                            if(prevState){\n                                if(isExist && page < 3){\n                                    console.log('Cleared', page)\n                                    setPage(1)\n                                    return \n                                }\n      \n                                if((typeParam === \"movie\" && prevState[0].title) || (typeParam ===\"tv\" && prevState[0].name)){\n                                    console.log(\"PAGIN\", page)\n          \n                                    return [...prevState, ...fetchedMovie]\n                                }\n                            }\n                            return fetchedMovie\n                            }) \n                    }\n                    catch(error){Notiflix.Notify.failure('Error')}\n                }\n                const getMoviesByQuery = async(q) =>{  \n                    try{\n                        const fetchedMovie = await API.searchMovies(q, page, type)\n                        setSearchResult(prevState => prevState? [...prevState, ...fetchedMovie] : fetchedMovie)\n                    }\n                    catch(error){Notiflix.Notify.failure('Error')}\n                }\n                if(!q){\n                    getMoviesList()\n                    return\n                }\n                getMoviesByQuery(q)\n       }, [searchParams, page, location, typeParam, type])\n\n    const onBackToTop = () =>{\n        window.scrollTo({top: 0, left: 0, behavior: \"smooth\",});\n    }\n    \n    const formHandler = ({ query }) => {\n        setPage(1)\n        setSearchParams({q: query})\n        setSearchResult(null)\n    }\n\n    const handlePageChange = () =>{\n        setPage(prev => prev+1)\n    }\n    \n    return ( \n        <div>\n            <SearchBar onSubmit={formHandler}/>\n            <MoviesList movies={searchResult} location={location}/> \n            <button className={css.loadButton} onClick={handlePageChange}>load more</button>\n            <button onClick={onBackToTop} className={css.backToTopButton}><FaArrowUp size=\"2em\"/></button>\n        </div>)\n}   \n\nexport default Movies\n\n"],"names":["SearchBar","_ref","onSubmit","query","setQuery","useState","_jsx","children","_jsxs","className","css","e","preventDefault","Notiflix","failure","type","autoComplete","autoFocus","placeholder","onChange","target","value","MoviesList","movies","location","map","movie","release_date","splitted","split","Link","to","pathname","concat","id","state","from","src","poster_path","alt","title","name","CiCalendarDate","size","MdStar","vote_average","toFixed","MdLanguage","original_language","Movies","searchResult","setSearchResult","page","setPage","useLocation","searchParams","setSearchParams","useSearchParams","typeParam","setTypeParam","useEffect","prev","console","log","q","get","async","fetchedMovie","API","prevState","error","getMoviesByQuery","prevVal","currVal","isExist","find","el","includes","getMoviesList","onClick","handlePageChange","onBackToTop","window","scrollTo","top","left","behavior","FaArrowUp"],"sourceRoot":""}